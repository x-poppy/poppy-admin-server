swagger: "2.0"
info:
  version: "1.0.0"
  title: "Poppy Server API Specification"

tags:
- name: "Login"
  description: "Login to `poppy server`"

- name: "Resource"
  description: "Resource Entity"

- name: "Org"
  description: "Org Entity"

- name: "app"
  description: "Access to Petstore orders"

- name: "role"
  description: "Operations about user"
  externalDocs:
    description: "Find out more about our store"
    url: "http://swagger.io"

consumes:
  - "application/json"
  - "application/x-www-form-urlencoded"
produces:
  - "application/json"

schemes:
- "http"
- "https"

securityDefinitions:
  accessToken:
    type: apiKey
    name: Authorization
    in: header

definitions:
  LoginDto:
    type: object
    properties:
      userName:
        type: string
        example: root
      password:
        type: string
        example: "********"
      appNo:
        type: string
    required:
      - "userName"
      - "password"
      - "appNo"

  AppDomainEntity:
    type: object
    properties:
      appNo:
        type: string
      domain:
        type: string

paths:
  /api/v1/app-domain:
    get:
      tags:
        - "Login"
      summary: "Get app-domain entity by domain"
      description: "This API should be the first one API for client to get the AppNo by domain."
      parameters:
        - in: "header"
          name: "x-app-domain"
          description: "If this value is empty it will get the domain from the request"
          type: string
      responses:
        "200":
          description: ""
          schema:
            $ref: "#/definitions/AppDomainEntity"

  /api/v1/session-auth:
    post:
      tags:
        - "Login"
      summary: "Validate and get the login token."
      description: "Validate the login centennial and response the authorization token."
      parameters:
        - in: body
          name: loginDto
          required: true
          schema:
            $ref: "#/definitions/LoginDto"
      responses:
        "200":
          description: ""

  /api/v1/session:
    post:
      tags:
        - "Login"
      parameters:
        - in: header
          name: "session-token"
          required: true
          type: string
      responses:
        "200":
          description: ""

    delete:
      tags:
        - "Login"
      responses:
        "200":
          description: ""
      security:
        - accessToken: []

  /api/v1/menu:
    get:
      summary: "Get the app menu tree for current user"
      tags:
        - "Resource"
      responses:
        "200":
          description: ""
      security:
        - accessToken: []

  /api/v1/head-icon:
    get:
      summary: "Get the app head icon for current user"
      tags:
        - "Resource"
      responses:
        "200":
          description: ""
      security:
        - accessToken: []

  /api/v1/org:
    get:
      summary: "Get org list for current user"
      tags:
        - "Org"
      responses:
        "200":
          description: ""
      security:
        - accessToken: []


      deprecated: false

externalDocs:
  description: "http://swagger.io"
  url: "http://swagger.io"
